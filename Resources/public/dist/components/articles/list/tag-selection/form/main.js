define(["jquery","text!/admin/api/tags/fields","text!./form.html"],function(a,b,c){"use strict";var d={options:{data:{tag:null},selectCallback:function(a){},matchings:JSON.parse(b)},templates:{skeleton:c}};return{defaults:d,initialize:function(){var b=a(this.templates.skeleton({translations:this.translations}));this.$el.append(b),this.sandbox.start([{name:"search@husky",options:{el:b.find(".tag-selection-search"),appearance:"white small",instanceName:"tag-selection-search"}},{name:"datagrid@husky",options:{el:b.find(".tag-selection-list"),instanceName:"tag-selection",url:"/admin/api/tags?flat=true",resultKey:"tags",sortable:!1,selectedCounter:!1,searchInstanceName:"tag-selection-search",searchFields:["name"],preselected:this.options.data.tag?[this.options.data.tag.id]:[],paginationOptions:{dropdown:{limit:20}},viewOptions:{table:{selectItem:{type:"radio"}}},matchings:this.options.matchings}}]),this.sandbox.on("sulu_article.tag-selection.form.get",this.getEvent.bind(this))},getEvent:function(){this.sandbox.emit("husky.datagrid.tag-selection.items.get-selected",function(a,b){var c=this.options.data;b.length>0&&(c.tagId=a[0],c.tagItem=b[0]),this.options.selectCallback(c)}.bind(this),!0)}}});