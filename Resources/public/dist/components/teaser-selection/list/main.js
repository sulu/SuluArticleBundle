define(["underscore"],function(a){"use strict";var b={options:{locale:null,url:"",resultKey:null,searchFields:[],matchings:[],selectCallback:function(a){}},templates:{skeleton:['<div class="grid">','   <div class="grid-row search-row">','       <div class="grid-col-8"/>','       <div class="grid-col-4 teaser-selection-search"/>',"   </div>",'   <div class="grid-row">','       <div class="grid-col-12 teaser-selection-list"/>',"   </div>","</div>"].join("")}};return{defaults:b,initialize:function(){var b=$(this.templates.skeleton());this.$el.append(b),this.sandbox.start([{name:"search@husky",options:{el:".teaser-selection-search",appearance:"white small",instanceName:this.options.instanceName+"-teaser-search"}},{name:"datagrid@husky",options:{el:".teaser-selection-list",instanceName:"teaser-selection",url:this.options.url+"?locale="+this.options.locale,preselected:a.map(this.options.data,function(a){return a.id}),resultKey:this.options.resultKey,sortable:!1,columnOptionsInstanceName:"",clickCallback:function(a){this.sandbox.emit("husky.datagrid.teaser-selection.toggle.item",a)}.bind(this),selectedCounter:!0,searchInstanceName:this.options.instanceName+"-teaser-search",searchFields:this.options.searchFields,paginationOptions:{dropdown:{limit:20}},matchings:this.options.matchings}}]),this.bindCustomEvents()},bindCustomEvents:function(){this.sandbox.on("husky.datagrid.teaser-selection.item.select",function(a){this.options.selectCallback({type:this.options.type,id:a})}.bind(this)),this.sandbox.on("husky.datagrid.teaser-selection.item.deselect",function(a){this.options.deselectCallback({type:this.options.type,id:a})}.bind(this))}}});