define(function(){return{defaults:{options:{selected:null,locale:null,selectCallback:function(a){},cancelCallback:function(){}},translations:{overlayTitle:"public.choose"}},initialize:function(){this.id=this.options.selected;var a=$("<div/>"),b=$("<div/>");this.$el.append(a),this.sandbox.start([{name:"overlay@husky",options:{el:a,openOnStart:!0,removeOnClose:!0,skin:"medium",instanceName:"page-select",slides:[{title:this.translations.overlayTitle,data:b,cssClass:"data-source-slide",contentSpacing:!1,okCallback:function(){this.item&&this.options.selectCallback(this.item)}.bind(this),cancelCallback:function(){this.options.cancelCallback()}.bind(this)}]}}]).then(this.startContentDatasource.bind(this,b))},startContentDatasource:function(a){this.sandbox.start([{name:"page-tree-route/content-datasource@suluarticle",options:{el:a,selected:this.options.selected,locale:this.options.locale,selectedUrl:"/admin/api/nodes/{datasource}?tree=true&language={locale}&fields=title,order,published,url&webspace-nodes=all",rootUrl:"/admin/api/nodes?language={locale}&fields=title,order,published&webspace-nodes=all",resultKey:"nodes",instanceName:"internal-link",instanceNamePrefix:"",showStatus:!0,selectCallback:function(a,b,c,d){return this.id===a?this.setItem(null,null):void this.setItem(d,a)}.bind(this)}}])},setItem:function(a,b){this.item=a,this.id=b;var c="activate";a||(c="deactivate"),this.sandbox.emit("husky.overlay.page-select.okbutton."+c)}}});