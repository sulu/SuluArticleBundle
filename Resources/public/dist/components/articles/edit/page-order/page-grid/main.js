define(["jquery","text!./grid.html"],function(a,b){"use strict";var c=function(a,b,c){var d=parseInt(b.find("input").val()),e=parseInt(c.find("input").val()),f=b.data("id"),g=c.data("id");return d<e?-1:d>e||f===a||g===a?1:0},d=function(a){a.addClass("highlight-animation"),a.one("animationend webkitAnimationEnd oanimationend MSAnimationEnd",function(){a.removeClass("highlight-animation")})},e=function(a){a.find("input").focus()};return{defaults:{options:{pages:[],updateCallback:function(a){}},templates:{grid:b},translations:{title:"public.title"}},initialize:function(){this.render(),this.bindDomEvents()},render:function(){this.$el.append(this.templates.grid({translations:this.translations,pages:this.options.pages}))},bindDomEvents:function(){this.$el.find("input").on("change",function(b){this.orderTable(a(b.currentTarget).parents("tr"))}.bind(this))},orderTable:function(b){var f=b.data("id"),g=this.$el.find("tbody tr").get(),h=[];g.sort(function(b,d){return c(f,a(b),a(d))}),a.each(g,function(b,c){a(c).find("input").val(b+1),h.push(a(c).data("id")),this.$el.find("table").children("tbody").append(c)}.bind(this)),d(b),e(b),this.options.updateCallback(h)}}});