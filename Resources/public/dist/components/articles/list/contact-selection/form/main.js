define(["jquery","text!/admin/api/contacts/fields","text!./form.html"],function(a,b,c){"use strict";var d={options:{data:{contact:null},selectCallback:function(a){},matchings:JSON.parse(b)},templates:{skeleton:c}};return{defaults:d,initialize:function(){var b=a(this.templates.skeleton({translations:this.translations}));this.$el.append(b),this.sandbox.start([{name:"search@husky",options:{el:b.find(".contact-selection-search"),appearance:"white small",instanceName:"contact-selection-search"}},{name:"datagrid@husky",options:{el:b.find(".contact-selection-list"),instanceName:"contact-selection",url:"/admin/api/contacts?flat=true",resultKey:"contacts",sortable:!1,selectedCounter:!1,searchInstanceName:"contact-selection-search",searchFields:["fullName","mainEmail"],preselected:this.options.data.contact?[this.options.data.contact.id]:[],paginationOptions:{dropdown:{limit:20}},viewOptions:{table:{selectItem:{type:"radio"}}},matchings:this.options.matchings}}]),this.sandbox.on("sulu_article.contact-selection.form.get",this.getEvent.bind(this))},getEvent:function(){this.sandbox.emit("husky.datagrid.contact-selection.items.get-selected",function(a,b){var c=this.options.data;b.length>0&&(c.contactId=a[0],c.contactItem=b[0]),this.options.selectCallback(c)}.bind(this),!0)}}});